(this.webpackJsonpsmall_blog=this.webpackJsonpsmall_blog||[]).push([[0],{27:function(t,e,n){},29:function(t,e,n){},31:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n(20),a=n.n(s),r=n(11),o=(n(27),n(2)),i=n(22),u=n(7),j=n.n(u),l=n(9),b=n(8),d="https://bloggy-api.herokuapp.com/",p=function(){var t=Object(l.a)(j.a.mark((function t(e){var n,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d).concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.next=7,n.json();case 7:return c=t.sent,t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f="posts",h=function(t){return e=f,n=t,fetch("".concat(d).concat(e,"/").concat(n),{method:"DELETE"});var e,n},m=function(t){return function(t,e){return fetch("".concat(d).concat(t),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}(f,t).then((function(t){return t.json()}))},O=(n(29),n(1));function x(t){var e=t.selectedPostId,n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],r=s[1],o=function(){var t=Object(l.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("posts/".concat(e,"?_embed=comments"));case 2:n=t.sent,r(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){return o(),function(){r([])}}),[e]),Object(O.jsxs)("div",{className:"DetailsPost",children:[Object(O.jsx)("h2",{children:a.title}),Object(O.jsx)("div",{children:a.body}),Object(O.jsxs)("div",{className:"comments",children:[Object(O.jsx)("h2",{children:"Comments:"}),Object(O.jsx)("ul",{className:"DetailsPost__list",children:a.comments&&a.comments.map((function(t){return Object(O.jsx)("li",{className:"DetailsPost__item",children:Object(O.jsx)("div",{children:t.body})},t.id)}))})]})]})}n(31);function v(t){var e=t.addPost,n=Object(c.useState)(""),s=Object(b.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(""),i=Object(b.a)(o,2),u=i[0],j=i[1],l=function(t,e){e(t)};return Object(O.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(a,u),r(""),j("")},children:[Object(O.jsx)("div",{className:"form-field",children:Object(O.jsx)("input",{type:"text",name:"title",placeholder:"Input title",required:!0,value:a,onChange:function(t){l(t.target.value,r)}})}),Object(O.jsx)("div",{className:"form-field",children:Object(O.jsx)("textarea",{name:"body",placeholder:"Input text for your post",required:!0,value:u,onChange:function(t){l(t.target.value,j)}})}),Object(O.jsx)("button",{type:"submit",className:"btn",children:"Add a comment"})]})}function y(t){var e=t.match,n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],u=s[1],d=Object(c.useState)([]),f=Object(b.a)(d,2),y=(f[0],f[1]),P=+e.params.postId,_=function(){var t=Object(l.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("posts");case 2:e=t.sent,u(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=Object(l.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("comments");case 2:e=t.sent,y(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){_(),N()}),[]),Object(O.jsxs)("div",{className:"PostList",children:[Object(O.jsx)("ul",{className:"PostList__list",children:a.map((function(t){return Object(O.jsxs)("li",{className:"PostList__item",children:[Object(O.jsx)("h2",{children:t.title}),Object(O.jsx)("p",{children:t.body}),Object(O.jsx)("button",{name:t.id,type:"button",className:"PostList__btn btn",onClick:function(t){var e=t.target;h(e.name),u(a.filter((function(t){return t.id!==+e.name})))},children:"Delete post"}),Object(O.jsx)(r.b,{name:t.id,className:"PostList__btn btn",to:"/posts/".concat(t.id),children:"Post details"}),Object(O.jsx)(r.b,{className:"PostList__btn btn",to:"/posts/addPost",children:"Creat post"})]},t.id)}))}),Object(O.jsx)(o.b,{path:"/posts/addPost",exact:!0,children:Object(O.jsx)(v,{addPost:function(t,e){m({title:t,body:e}).then((function(t){u((function(e){return[].concat(Object(i.a)(e),[t])}))}))}})}),Object(O.jsx)(o.b,{path:"/posts/".concat(P),render:function(){return Object(O.jsx)(x,{selectedPostId:P})}})]})}n(37);var P=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(o.a,{path:"/",to:"/posts"}),Object(O.jsx)(o.b,{path:"/posts/:postId?",component:y})]})};a.a.render(Object(O.jsx)(r.a,{children:Object(O.jsx)(P,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.8aff6b14.chunk.js.map