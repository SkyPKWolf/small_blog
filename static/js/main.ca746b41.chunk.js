(this.webpackJsonpsmall_blog=this.webpackJsonpsmall_blog||[]).push([[0],{27:function(t,e,n){},29:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},39:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n(21),a=n.n(s),r=n(10),o=(n(27),n(2)),i=n(15),u=n(5),l=n.n(u),j=n(9),b=n(4),d="https://bloggy-api.herokuapp.com/",p=function(){var t=Object(j.a)(l.a.mark((function t(e){var n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d).concat(e));case 2:if((n=t.sent).ok){t.next=5;break}throw new Error("".concat(n.status," - ").concat(n.statusText));case 5:return t.next=7,n.json();case 7:return c=t.sent,t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(t,e){return fetch("".concat(d).concat(t),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})},f=(n(29),n(1));function h(t){var e=t.selectedPostId,n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(""),u=Object(b.a)(o,2),d=u[0],h=u[1],O=Object(c.useState)([]),x=Object(b.a)(O,2),v=x[0],_=x[1],y=Object(c.useState)(!1),N=Object(b.a)(y,2),P=N[0],g=N[1],F=function(){var t=Object(j.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("posts/".concat(e,"?_embed=comments"));case 2:n=t.sent,r(n),_(n.comments);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t={postId:e,body:d};d.length>3?(function(t){return m("comments",t).then((function(t){return t.json()}))}(t).then((function(t){_((function(e){return[].concat(Object(i.a)(e),[t])}))})),h("")):g(!0)};return Object(c.useEffect)((function(){F()}),[e]),Object(f.jsxs)("div",{className:"DetailsPost",children:[Object(f.jsx)("h2",{children:a.title}),Object(f.jsx)("div",{children:a.body}),Object(f.jsxs)("div",{className:"comments",children:[Object(f.jsx)("h2",{children:"Comments:"}),Object(f.jsx)("ul",{className:"DetailsPost__list",children:v&&v.map((function(t){return Object(f.jsx)("li",{className:"DetailsPost__item",children:Object(f.jsx)("div",{children:t.body})},t.id)}))}),Object(f.jsxs)("form",{className:"Form comment",onSubmit:function(t){t.preventDefault(),S()},children:[Object(f.jsx)("div",{className:"Form__field",children:Object(f.jsx)("textarea",{className:"Form__input",name:"body",placeholder:"Input your comment",required:!0,value:d,onChange:function(t){var e,n;e=t.target.value,n=h,g(!1),n(e)}})}),P&&Object(f.jsx)("p",{className:"Form__errorMassage",children:"Input more 3 characters"}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"Add comment"})]})]})]})}n(31);function O(t){var e=t.addPost,n=Object(c.useState)(""),s=Object(b.a)(n,2),a=s[0],r=s[1],o=Object(c.useState)(""),i=Object(b.a)(o,2),u=i[0],l=i[1],j=Object(c.useState)(!1),d=Object(b.a)(j,2),p=d[0],m=d[1],h=function(t,e){m(!1),e(t)};return Object(f.jsxs)("form",{className:"Form",onSubmit:function(t){t.preventDefault(),a.trim().length>3&&u.trim().length>3?(e(a,u),r(""),l("")):m(!0)},children:[Object(f.jsx)("div",{className:"Form__field",children:Object(f.jsx)("input",{className:"Form__input",type:"text",name:"title",value:a,placeholder:"Input title",required:!0,onChange:function(t){h(t.target.value,r)}})}),Object(f.jsx)("div",{className:"Form__field",children:Object(f.jsx)("textarea",{className:"Form__input",name:"body",placeholder:"Input text for your post",required:!0,value:u,onChange:function(t){h(t.target.value,l)}})}),p&&Object(f.jsx)("p",{className:"Form__errorMassage",children:"Enter more than 3 characters"}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"Add post"})]})}n(32);function x(t){var e=t.updatePost,n=t.selectedPostId,s=Object(c.useState)([]),a=Object(b.a)(s,2),r=a[0],o=a[1],i=Object(c.useState)(""),u=Object(b.a)(i,2),d=u[0],m=u[1],h=Object(c.useState)(""),O=Object(b.a)(h,2),x=O[0],v=O[1],_=function(){var t=Object(j.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("posts/".concat(n));case 2:e=t.sent,o(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){_()}),[n]),Object(c.useEffect)((function(){m(r.title),v(r.body)}),[r]);var y=function(t,e){e(t)};return Object(f.jsxs)("form",{className:"Form",onSubmit:function(t){t.preventDefault(),e(d,x)},children:[Object(f.jsx)("div",{className:"Form__field",children:Object(f.jsx)("input",{className:"Form__input",type:"text",name:"title",defaultValue:d,placeholder:"Input title",required:!0,onChange:function(t){y(t.target.value,m)}})}),Object(f.jsx)("div",{className:"Form__field",children:Object(f.jsx)("textarea",{className:"Form__input",name:"body",placeholder:"Input text for your post",required:!0,defaultValue:x,onChange:function(t){y(t.target.value,v)}})}),Object(f.jsx)("button",{type:"submit",className:"btn",children:"Update Post"})]})}var v="posts",_=function(t){return e=v,n=t,fetch("".concat(d).concat(e,"/").concat(n),{method:"DELETE"});var e,n},y=function(t,e){return function(t,e){return fetch("".concat(d).concat(t),{method:"PUT",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}("".concat(v,"/").concat(e),t).then((function(t){return t.json()}))};n(33);function N(t){var e=t.match,n=Object(c.useState)([]),s=Object(b.a)(n,2),a=s[0],u=s[1],d=Object(c.useState)([]),N=Object(b.a)(d,2),P=(N[0],N[1]),g=+e.params.postId,F=function(){var t=Object(j.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("posts");case 2:e=t.sent,u(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Object(j.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p("comments");case 2:e=t.sent,P(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(t,e){y({title:t,body:e},g).then((function(t){var e=g;u(a.map((function(n){return n.id===e?t:n})))}))};return Object(c.useEffect)((function(){F(),S()}),[]),Object(f.jsxs)("div",{className:"PostList",children:[Object(f.jsx)("ul",{className:"PostList__list",children:a.map((function(t){return Object(f.jsxs)("li",{className:"PostList__item",children:[Object(f.jsx)("h2",{children:t.title}),Object(f.jsx)("p",{children:t.body}),Object(f.jsx)("button",{name:t.id,type:"button",className:"PostList__btn btn",onClick:function(t){var e=t.target;_(e.name),u(a.filter((function(t){return t.id!==+e.name})))},children:"Delete post"}),Object(f.jsx)(r.b,{className:"PostList__btn btn",to:"/posts/".concat(t.id),children:"Post details"}),Object(f.jsx)(r.b,{className:"PostList__btn btn",to:"/posts/".concat(t.id,"/updatePost"),children:"Update Post"})]},t.id)}))}),Object(f.jsx)(o.b,{path:"/posts/addPost",exact:!0,children:Object(f.jsx)(O,{addPost:function(t,e){(function(t){return m(v,t).then((function(t){return t.json()}))})({title:t,body:e}).then((function(t){u((function(e){return[].concat(Object(i.a)(e),[t])}))}))}})}),Object(f.jsx)(o.b,{path:"/posts/".concat(g,"/updatePost"),exact:!0,render:function(){return Object(f.jsx)(x,{selectedPostId:g,updatePost:w})}}),Object(f.jsx)(o.b,{path:"/posts/".concat(g),exact:!0,render:function(){return Object(f.jsx)(h,{selectedPostId:g})}})]})}n(39);var P=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{children:"Posts:"}),Object(f.jsx)(r.b,{className:"PostList__btn btn",to:"/posts/addPost",children:"Create post"}),Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(o.d,{children:[Object(f.jsx)(o.a,{path:"/",exact:!0,to:"/posts"}),Object(f.jsx)(o.b,{path:"/posts/:postId?",component:N})]})})]})};a.a.render(Object(f.jsx)(r.a,{children:Object(f.jsx)(P,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ca746b41.chunk.js.map